/*
 * rumtk attempts to implement HL7 and medical protocols for interoperability in medicine.
 * This toolkit aims to be reliable, simple, performant, and standards compliant.
 * Copyright (C) 2024  Luis M. Santos, M.D.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
 */


use ::phf::Map;
use ::phf_macros::phf_map;

pub const V2_MSHEADER_PATTERN: &str = "MSH";
pub const V2_DELETE_FIELD: &str = "\"\"";
pub const V2_SEGMENT_TERMINATOR: char = '\r';
pub const V2_TRUNCATION_CHARACTER: char = '#';

pub const V2_DATETIME_THOUSAND_TICK: u16 = 1000;
pub const V2_DATETIME_MICRO_LENGTH: u8 = 4;
pub const V2_EMPTY_STRING: &str = "";

pub type ElementDesc = Map<&'static str, &'static str>;
pub type ElementID = Map<&'static str, u8>;
pub type ElementName = Map<u8, &'static str>;
pub static V2_SEGMENT_DESC: ElementDesc = phf_map! {
    "ABS" => "Abstract",
    "ACC" => "Accident",
    "ADD" => "Addendum",
    "ADJ" => "Adjustment",
    "AFF" => "Professional Affiliation",
    "AIG" => "Appointment Information - General Resource",
    "AIL" => "Appointment Information - Location Resource",
    "AIP" => "Appointment Information - Personnel Resource",
    "AIS" => "Appointment Information",
    "AL1" => "Patient Allergy Information",
    "APR" => "Appointment Preferences",
    "ARQ" => "Appointment Request",
    "ARV" => "Access Restriction",
    "AUT" => "Authorization Information",
    "BHS" => "Batch Header",
    "BLC" => "Blood Code",
    "BPO" => "Blood product order",
    "BPX" => "Blood product dispense status",
    "BTS" => "Batch Trailer",
    "BTX" => "Blood Product Transfusion/Disposition",
    "BUI" => "Blood Unit Information",
    "CDM" => "Charge Description Master",
    "CDO" => "Cumulative Dosage",
    "CER" => "Certificate Detail",
    "CM0" => "Clinical Study Master",
    "CM1" => "Clinical Study Phase Master",
    "CM2" => "Clinical Study Schedule Master",
    "CNS" => "Clear Notification",
    "CON" => "Consent Segment",
    "CSP" => "Clinical Study Phase",
    "CSR" => "Clinical Study Registration",
    "CSS" => "Clinical Study Data Schedule Segment",
    "CTD" => "Contact Data",
    "CTI" => "Clinical Trial Identification",
    "CTR" => "Contract Master Outbound",
    "DB1" => "Disability",
    "DEV" => "Device",
    "DG1" => "Diagnosis",
    "DMI" => "DRG Master File Information",
    "DON" => "Donation",
    "DPS" => "Diagnosis and Procedure Code Segment",
    "DRG" => "Diagnosis Related Group",
    "DSC" => "Continuation Pointer",
    "DSP" => "Display Data",
    "DST" => "Transport Destination",
    "ECD" => "Equipment Command",
    "ECR" => "Equipment Command Response",
    "EDU" => "Educational Detail",
    "EQP" => "Equipment/log Service",
    "EQU" => "Equipment Detail",
    "ERR" => "Error",
    "EVN" => "Event Type",
    "FAC" => "Facility",
    "FHS" => "File Header",
    "FT1" => "Financial Transaction",
    "FTS" => "File Trailer",
    "GOL" => "Goal Detail",
    "GP1" => "Grouping/Reimbursement - Visit",
    "GP2" => "Grouping/Reimbursement - Procedure Line Item",
    "GT1" => "Guarantor",
    "H**" => "any HL7 segment",
    "IAM" => "Patient Adverse Reaction Information",
    "IAR" => "Allergy Reaction",
    "IIM" => "Inventory Item Master",
    "ILT" => "Material Lot",
    "IN1" => "Insurance",
    "IN2" => "Insurance Additional Information",
    "IN3" => "Insurance Additional Information, Certification",
    "INV" => "Inventory Detail",
    "IPC" => "Imaging Procedure Control Segment",
    "IPR" => "Invoice Processing Results",
    "ISD" => "Interaction Status Detail",
    "ITM" => "Material Item",
    "IVC" => "Invoice Segment",
    "IVT" => "Material Location",
    "LAN" => "Language Detail",
    "LCC" => "Location Charge Code",
    "LCH" => "Location Characteristic",
    "LDP" => "Location Department",
    "LOC" => "Location Identification",
    "LRL" => "Location Relationship",
    "MCP" => "Master File Coverage",
    "MFA" => "Master File Acknowledgment",
    "MFE" => "Master File Entry",
    "MFI" => "Master File Identification",
    "MRG" => "Merge Patient Information",
    "MSA" => "Message Acknowledgment",
    "MSH" => "Message Header",
    "NCK" => "System Clock",
    "NDS" => "Notification Detail",
    "NK1" => "Next of Kin / Associated Parties",
    "NPU" => "Bed Status Update",
    "NSC" => "Application Status Change",
    "NST" => "Application control level statistics",
    "NTE" => "Notes and Comments",
    "OBR" => "Observation Request",
    "OBX" => "Observation/Result",
    "ODS" => "Dietary Orders, Supplements, and Preferences",
    "ODT" => "Diet Tray Instructions",
    "OH1" => "Person Employment Status",
    "OH2" => "Past or Present Job",
    "OH3" => "Usual Work",
    "OH4" => "Combat Zone Work",
    "OM1" => "General Segment",
    "OM2" => "Numeric Observation",
    "OM3" => "Categorical Service/Test/Observation",
    "OM4" => "Observations that Require Specimens",
    "OM5" => "Observation Batteries Sets)",
    "OM6" => "Observations that are Calculated from Other Observations",
    "OM7" => "Additional Basic Attributes",
    "OMC" => "Supporting Clinical Information",
    "ORC" => "Common Order",
    "ORG" => "Practitioner Organization Unit",
    "OVR" => "Override Segment",
    "PAC" => "Shipment Package",
    "PCE" => "Patient Charge Cost Center Exceptions",
    "PCR" => "Possible Causal Relationship",
    "PD1" => "Patient Additional Demographic",
    "PDA" => "Patient Death and Autopsy",
    "PDC" => "Product Detail Country",
    "PEO" => "Product Experience Observation",
    "PES" => "Product Experience Sender",
    "PID" => "Patient Identification",
    "PKG" => "Item Packaging",
    "PM1" => "Payer Master File",
    "PMT" => "Payment Information",
    "PR1" => "Procedures",
    "PRA" => "Practitioner Detail",
    "PRB" => "Problem Details",
    "PRC" => "Pricing",
    "PRD" => "Provider Data",
    "PRT" => "Participation Information",
    "PSG" => "Product/Service Group",
    "PSH" => "Product Summary Header",
    "PSL" => "Product/Service Line Item",
    "PSS" => "Product/Service Section",
    "PTH" => "Pathway",
    "PV1" => "Patient Visit",
    "PV2" => "Patient Visit - Additional Information",
    "PYE" => "Payee Information",
    "QAK" => "Query Acknowledgment",
    "QID" => "Query Identification",
    "QPD" => "Query Parameter Definition",
    "QRD" => "QRD added by default)",
    "QRF" => "QRF added by default)",
    "QRI" => "Query Response Instance",
    "RCP" => "Response Control Parameter",
    "RDF" => "Table Row Definition",
    "RDT" => "Table Row Data",
    "REL" => "Clinical Relationship Segment",
    "RF1" => "Referral Information",
    "RFI" => "Request for Information",
    "RGS" => "Resource Group",
    "RMI" => "Risk Management Incident",
    "ROL" => "Role",
    "RQ1" => "Requisition Detail-1",
    "RQD" => "Requisition Detail",
    "RXA" => "Pharmacy/Treatment Administration",
    "RXC" => "Pharmacy/Treatment Component Order",
    "RXD" => "Pharmacy/Treatment Dispense",
    "RXE" => "Pharmacy/Treatment Encoded Order",
    "RXG" => "Pharmacy/Treatment Give",
    "RXO" => "Pharmacy/Treatment Order",
    "RXR" => "Pharmacy/Treatment Route",
    "RXV" => "Pharmacy/Treatment Infusion",
    "SAC" => "Specimen Container detail",
    "SCD" => "Anti-Microbial Cycle Data",
    "SCH" => "Scheduling Activity Information",
    "SCP" => "Sterilizer Configuration Anti-Microbial Devices)",
    "SDD" => "Sterilization Device Data",
    "SFT" => "Software Segment",
    "SGH" => "Segment Group Header",
    "SGT" => "Segment Group Trailer",
    "SHP" => "Shipment",
    "SID" => "Substance Identifier",
    "SLT" => "Sterilization Lot",
    "SPM" => "Specimen",
    "STF" => "Staff Identification",
    "STZ" => "Sterilization Parameter",
    "TCC" => "Test Code Configuration",
    "TCD" => "Test Code Detail",
    "TQ1" => "Timing/Quantity",
    "TQ2" => "Timing/Quantity Relationship",
    "TXA" => "Transcription Document Header",
    "UAC" => "User Authentication Credential Segment",
    "UB1" => "Uniform Billing Data 1",
    "UB2" => "Uniform Billing Data 2",
    "URD" => "withdrawn",
    "URS" => "withdrawn",
    "VAR" => "Variance",
    "VND" => "Purchasing Vendor",
    "Z**" => "Non-Standard/Private Segment"
};

pub static V2_SEGMENT_IDS: ElementID = phf_map! {
    "ABS" => 1u8,
    "ACC" => 2u8,
    "ADD" => 3u8,
    "ADJ" => 4u8,
    "AFF" => 5u8,
    "AIG" => 6u8,
    "AIL" => 7u8,
    "AIP" => 8u8,
    "AIS" => 9u8,
    "AL1" => 10u8,
    "APR" => 11u8,
    "ARQ" => 12u8,
    "ARV" => 13u8,
    "AUT" => 14u8,
    "BHS" => 15u8,
    "BLC" => 16u8,
    "BPO" => 17u8,
    "BPX" => 18u8,
    "BTS" => 19u8,
    "BTX" => 20u8,
    "BUI" => 21u8,
    "CDM" => 22u8,
    "CDO" => 23u8,
    "CER" => 24u8,
    "CM0" => 25u8,
    "CM1" => 26u8,
    "CM2" => 27u8,
    "CNS" => 28u8,
    "CON" => 29u8,
    "CSP" => 30u8,
    "CSR" => 31u8,
    "CSS" => 32u8,
    "CTD" => 33u8,
    "CTI" => 34u8,
    "CTR" => 35u8,
    "DB1" => 36u8,
    "DEV" => 37u8,
    "DG1" => 38u8,
    "DMI" => 39u8,
    "DON" => 40u8,
    "DPS" => 41u8,
    "DRG" => 42u8,
    "DSC" => 43u8,
    "DSP" => 44u8,
    "DST" => 45u8,
    "ECD" => 46u8,
    "ECR" => 47u8,
    "EDU" => 48u8,
    "EQP" => 49u8,
    "EQU" => 50u8,
    "ERR" => 51u8,
    "EVN" => 52u8,
    "FAC" => 53u8,
    "FHS" => 54u8,
    "FT1" => 55u8,
    "FTS" => 56u8,
    "GOL" => 57u8,
    "GP1" => 58u8,
    "GP2" => 59u8,
    "GT1" => 60u8,
    "H**" => 61u8,
    "IAM" => 62u8,
    "IAR" => 63u8,
    "IIM" => 64u8,
    "ILT" => 65u8,
    "IN1" => 66u8,
    "IN2" => 67u8,
    "IN3" => 68u8,
    "INV" => 69u8,
    "IPC" => 70u8,
    "IPR" => 71u8,
    "ISD" => 72u8,
    "ITM" => 73u8,
    "IVC" => 74u8,
    "IVT" => 75u8,
    "LAN" => 76u8,
    "LCC" => 77u8,
    "LCH" => 78u8,
    "LDP" => 79u8,
    "LOC" => 80u8,
    "LRL" => 81u8,
    "MCP" => 82u8,
    "MFA" => 83u8,
    "MFE" => 84u8,
    "MFI" => 85u8,
    "MRG" => 86u8,
    "MSA" => 87u8,
    "MSH" => 89u8,
    "NCK" => 90u8,
    "NDS" => 91u8,
    "NK1" => 92u8,
    "NPU" => 93u8,
    "NSC" => 94u8,
    "NST" => 95u8,
    "NTE" => 96u8,
    "OBR" => 97u8,
    "OBX" => 98u8,
    "ODS" => 99u8,
    "ODT" => 100u8,
    "OH1" => 101u8,
    "OH2" => 102u8,
    "OH3" => 103u8,
    "OH4" => 104u8,
    "OM1" => 105u8,
    "OM2" => 106u8,
    "OM3" => 107u8,
    "OM4" => 108u8,
    "OM5" => 109u8,
    "OM6" => 110u8,
    "OM7" => 111u8,
    "OMC" => 112u8,
    "ORC" => 113u8,
    "ORG" => 114u8,
    "OVR" => 115u8,
    "PAC" => 116u8,
    "PCE" => 117u8,
    "PCR" => 118u8,
    "PD1" => 119u8,
    "PDA" => 120u8,
    "PDC" => 121u8,
    "PEO" => 122u8,
    "PES" => 123u8,
    "PID" => 124u8,
    "PKG" => 125u8,
    "PM1" => 126u8,
    "PMT" => 127u8,
    "PR1" => 128u8,
    "PRA" => 129u8,
    "PRB" => 130u8,
    "PRC" => 131u8,
    "PRD" => 132u8,
    "PRT" => 133u8,
    "PSG" => 134u8,
    "PSH" => 135u8,
    "PSL" => 136u8,
    "PSS" => 137u8,
    "PTH" => 138u8,
    "PV1" => 139u8,
    "PV2" => 140u8,
    "PYE" => 141u8,
    "QAK" => 142u8,
    "QID" => 143u8,
    "QPD" => 144u8,
    "QRD" => 145u8,
    "QRF" => 146u8,
    "QRI" => 147u8,
    "RCP" => 148u8,
    "RDF" => 149u8,
    "RDT" => 150u8,
    "REL" => 151u8,
    "RF1" => 152u8,
    "RFI" => 153u8,
    "RGS" => 154u8,
    "RMI" => 155u8,
    "ROL" => 156u8,
    "RQ1" => 157u8,
    "RQD" => 158u8,
    "RXA" => 159u8,
    "RXC" => 160u8,
    "RXD" => 161u8,
    "RXE" => 162u8,
    "RXG" => 163u8,
    "RXO" => 164u8,
    "RXR" => 165u8,
    "RXV" => 166u8,
    "SAC" => 167u8,
    "SCD" => 168u8,
    "SCH" => 169u8,
    "SCP" => 170u8,
    "SDD" => 171u8,
    "SFT" => 172u8,
    "SGH" => 173u8,
    "SGT" => 174u8,
    "SHP" => 175u8,
    "SID" => 176u8,
    "SLT" => 177u8,
    "SPM" => 178u8,
    "STF" => 179u8,
    "STZ" => 180u8,
    "TCC" => 181u8,
    "TCD" => 182u8,
    "TQ1" => 183u8,
    "TQ2" => 184u8,
    "TXA" => 185u8,
    "UAC" => 186u8,
    "UB1" => 187u8,
    "UB2" => 188u8,
    "URD" => 189u8,
    "URS" => 190u8,
    "VAR" => 191u8,
    "VND" => 192u8,
    "Z**" => 193u8
};

pub static V2_SEGMENT_NAMES: ElementName = phf_map! {
    1u8 => "ABS",
    2u8 => "ACC",
    3u8 => "ADD",
    4u8 => "ADJ",
    5u8 => "AFF",
    6u8 => "AIG",
    7u8 => "AIL",
    8u8 => "AIP",
    9u8 => "AIS",
    10u8 => "AL1",
    11u8 => "APR",
    12u8 => "ARQ",
    13u8 => "ARV",
    14u8 => "AUT",
    15u8 => "BHS",
    16u8 => "BLC",
    17u8 => "BPO",
    18u8 => "BPX",
    19u8 => "BTS",
    20u8 => "BTX",
    21u8 => "BUI",
    22u8 => "CDM",
    23u8 => "CDO",
    24u8 => "CER",
    25u8 => "CM0",
    26u8 => "CM1",
    27u8 => "CM2",
    28u8 => "CNS",
    29u8 => "CON",
    30u8 => "CSP",
    31u8 => "CSR",
    32u8 => "CSS",
    33u8 => "CTD",
    34u8 => "CTI",
    35u8 => "CTR",
    36u8 => "DB1",
    37u8 => "DEV",
    38u8 => "DG1",
    39u8 => "DMI",
    40u8 => "DON",
    41u8 => "DPS",
    42u8 => "DRG",
    43u8 => "DSC",
    44u8 => "DSP",
    45u8 => "DST",
    46u8 => "ECD",
    47u8 => "ECR",
    48u8 => "EDU",
    49u8 => "EQP",
    50u8 => "EQU",
    51u8 => "ERR",
    52u8 => "EVN",
    53u8 => "FAC",
    54u8 => "FHS",
    55u8 => "FT1",
    56u8 => "FTS",
    57u8 => "GOL",
    58u8 => "GP1",
    59u8 => "GP2",
    60u8 => "GT1",
    61u8 => "H**",
    62u8 => "IAM",
    63u8 => "IAR",
    64u8 => "IIM",
    65u8 => "ILT",
    66u8 => "IN1",
    67u8 => "IN2",
    68u8 => "IN3",
    69u8 => "INV",
    70u8 => "IPC",
    71u8 => "IPR",
    72u8 => "ISD",
    73u8 => "ITM",
    74u8 => "IVC",
    75u8 => "IVT",
    76u8 => "LAN",
    77u8 => "LCC",
    78u8 => "LCH",
    79u8 => "LDP",
    80u8 => "LOC",
    81u8 => "LRL",
    82u8 => "MCP",
    83u8 => "MFA",
    84u8 => "MFE",
    85u8 => "MFI",
    86u8 => "MRG",
    87u8 => "MSA",
    89u8 => "MSH",
    90u8 => "NCK",
    91u8 => "NDS",
    92u8 => "NK1",
    93u8 => "NPU",
    94u8 => "NSC",
    95u8 => "NST",
    96u8 => "NTE",
    97u8 => "OBR",
    98u8 => "OBX",
    99u8 => "ODS",
    100u8 => "ODT",
    101u8 => "OH1",
    102u8 => "OH2",
    103u8 => "OH3",
    104u8 => "OH4",
    105u8 => "OM1",
    106u8 => "OM2",
    107u8 => "OM3",
    108u8 => "OM4",
    109u8 => "OM5",
    110u8 => "OM6",
    111u8 => "OM7",
    112u8 => "OMC",
    113u8 => "ORC",
    114u8 => "ORG",
    115u8 => "OVR",
    116u8 => "PAC",
    117u8 => "PCE",
    118u8 => "PCR",
    119u8 => "PD1",
    120u8 => "PDA",
    121u8 => "PDC",
    122u8 => "PEO",
    123u8 => "PES",
    124u8 => "PID",
    125u8 => "PKG",
    126u8 => "PM1",
    127u8 => "PMT",
    128u8 => "PR1",
    129u8 => "PRA",
    130u8 => "PRB",
    131u8 => "PRC",
    132u8 => "PRD",
    133u8 => "PRT",
    134u8 => "PSG",
    135u8 => "PSH",
    136u8 => "PSL",
    137u8 => "PSS",
    138u8 => "PTH",
    139u8 => "PV1",
    140u8 => "PV2",
    141u8 => "PYE",
    142u8 => "QAK",
    143u8 => "QID",
    144u8 => "QPD",
    145u8 => "QRD",
    146u8 => "QRF",
    147u8 => "QRI",
    148u8 => "RCP",
    149u8 => "RDF",
    150u8 => "RDT",
    151u8 => "REL",
    152u8 => "RF1",
    153u8 => "RFI",
    154u8 => "RGS",
    155u8 => "RMI",
    156u8 => "ROL",
    157u8 => "RQ1",
    158u8 => "RQD",
    159u8 => "RXA",
    160u8 => "RXC",
    161u8 => "RXD",
    162u8 => "RXE",
    163u8 => "RXG",
    164u8 => "RXO",
    165u8 => "RXR",
    166u8 => "RXV",
    167u8 => "SAC",
    168u8 => "SCD",
    169u8 => "SCH",
    170u8 => "SCP",
    171u8 => "SDD",
    172u8 => "SFT",
    173u8 => "SGH",
    174u8 => "SGT",
    175u8 => "SHP",
    176u8 => "SID",
    177u8 => "SLT",
    178u8 => "SPM",
    179u8 => "STF",
    180u8 => "STZ",
    181u8 => "TCC",
    182u8 => "TCD",
    183u8 => "TQ1",
    184u8 => "TQ2",
    185u8 => "TXA",
    186u8 => "UAC",
    187u8 => "UB1",
    188u8 => "UB2",
    189u8 => "URD",
    190u8 => "URS",
    191u8 => "VAR",
    192u8 => "VND",
    193u8 => "Z**"
};

pub static V2_MESSAGE_DESC: ElementDesc = phf_map! {
    "ACK" => "Acknowledge",
    "ADT" => "Patient Administration",
    "BAR" => "",
    "BPS" => "",
    "BRP" => "",
    "BRT" => "",
    "BTS" => "",
    "CCF" => "",
    "CCM" => "",
    "CCQ" => "",
    "CCR" => "",
    "CCU" => "",
    "CQU" => "",
    "CRM" => "",
    "CSU" => "",
    "DBC" => "",
    "DBU" => "",
    "DEL" => "",
    "DEO" => "",
    "DER" => "",
    "DFT" => "",
    "DPR" => "",
    "DRC" => "",
    "DRG" => "",
    "EAC" => "",
    "EAN" => "",
    "EAR" => "",
    "EHC" => "",
    "ESR" => "",
    "ESU" => "",
    "INR" => "",
    "INU" => "",
    "LSR" => "",
    "LSU" => "",
    "MDM" => "",
    "MFK" => "",
    "MFN" => "",
    "NMD" => "",
    "OMB" => "",
    "OMD" => "",
    "OMG" => "",
    "OMI" => "",
    "OML" => "",
    "OMN" => "",
    "OMP" => "",
    "OMQ" => "",
    "OMS" => "",
    "OPL" => "",
    "OPR" => "",
    "OPU" => "",
    "ORA" => "",
    "ORB" => "",
    "ORD" => "",
    "ORG" => "",
    "ORI" => "",
    "ORL" => "",
    "ORN" => "",
    "ORP" => "",
    "ORS" => "",
    "ORU" => "Order Update",
    "ORX" => "",
    "OSM" => "",
    "OSU" => "",
    "OUL" => "",
    "PEX" => "",
    "PGL" => "",
    "PIN" => "",
    "PMU" => "",
    "PPG" => "",
    "PPP" => "",
    "PPR" => "",
    "QBP" => "",
    "QCN" => "",
    "QSB" => "",
    "QSX" => "",
    "QVR" => "",
    "RAS" => "",
    "RDE" => "",
    "RDR" => "",
    "RDS" => "",
    "RDY" => "",
    "REF" => "",
    "RGV" => "",
    "RPA" => "",
    "RPI" => "",
    "RPL" => "",
    "RPR" => "",
    "RQA" => "",
    "RQI" => "",
    "RQP" => "",
    "RRA" => "",
    "RRD" => "",
    "RRE" => "",
    "RRG" => "",
    "RRI" => "",
    "RSP" => "",
    "RTB" => "",
    "SCN" => "",
    "SDN" => "",
    "SDR" => "",
    "SDS" => "",
    "SIU" => "",
    "SLN" => "",
    "SLR" => "",
    "SLS" => "",
    "SMD" => "",
    "SMS" => "",
    "SRM" => "",
    "SRR" => "",
    "SSR" => "",
    "SSU" => "",
    "STC" => "",
    "STI" => "",
    "STS" => "",
    "TCR" => "",
    "TCU" => "",
    "UDM" => "",
    "VXU" => "Vaccine Update"
};

pub enum V2_SEARCH_EXPR_TYPE {
    V2_DEFAULT
}
